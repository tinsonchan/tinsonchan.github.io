---
title: hltt-cocos改版小结
comments: false
categories:
  - 技术
date: 2018-10-12 16:37:18
tags:
---

本来是在维护自己一直在做的小游戏，突然接到电话，需要去对hltt游戏进行cocos的改写，虽然没正式用过cocos creator来写游戏，但是之前也看过一下，应该没问题的，撸起袖子干。
<!--more-->
由于中间隔了一个国庆，所以就断断续续的完成了，而自己的心好想也一直没有收回来。
说一下整个开发过程中的事情吧：
### 引擎学习使用 ###
之前就已经浏览过一轮cocos的内容了，主要有几个方面：
1.ts的使用
现在看到的demo或者游戏大部分都是js写的，但是在使用egret的前提下，深深的爱上了ts，主要是代码提示和重构的优势，所以还是坚决的使用了ts语言。
2.组件的使用
其实cocos creator的前期开发和unity有点类似，毕竟也是写过两年的unity，所以还是能够比较适应这种开发模式的。主要使用了几种组件：
  1.label
  2.sprite
  3.AudioClip
  4.SpriteAtlas
  5.Animation
  还有一些其他的功能
  1.定时器
  2.动画
### 框架搭建 ###
  框架也不算完全从零开始，主要基于以前的一个unity项目还有kyle给过来的一个工程，另外还参考了by的一个框架。
  主要有几部分内容：
  1.事件
  2.日志
  3.UI管理器
  还有很多内容没加上的
  1.socket
  2.缓存池
  。。。
### 游戏开发 ###
  因为要快速开发，所以大部分代码还是直接从laya那边搬过来就用了，更多的是做cocos平台的适配，所以很多时候看到他们的代码像屎一样，却无法根治，还好代码是用ts写的，后面重构还是挺方便的。
### 游戏优化 ###
  游戏基本上开发就一周时间，其他主要还是做优化，主要是一个奇葩的问题，就是帧率是满的，但是玩起来却卡卡的，跟kyle讨论一下，发现是游戏节奏的问题，另外就是动画的处理，在触发新动画的时候，一定要不全部旧动画删除，不然就会出现时序的奇葩问题。
### 游戏提审上线 ###
  说起上线，也是一把泪啊，这次主要上线某个著名平台，一开始是说全力支持，发现到最后，却是自问自答，哎。

cocos版本hltt完成，接下来回归开发主线，另外要优化这套框架。


----------
追求卓越 成功就会在不经意间追上你